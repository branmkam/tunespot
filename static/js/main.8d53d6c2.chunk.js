(this.webpackJsonptunespot=this.webpackJsonptunespot||[]).push([[0],{25:function(e,t,n){},39:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var s=n(6),r=n.n(s),c=n(15),i=n.n(c),a=(n(39),n(25),n(2));function o(){return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{class:"content has-text-centered",children:[Object(a.jsx)("h1",{class:"title is-2",children:"TuneSpot"}),Object(a.jsx)("h1",{class:"subtitle is-5",children:"How many songs can you name?"})]})})}var l=n(5),u=n.n(l),d=n(7),h=n(12),p=n.n(h),b="4ac408fbeab9451d8abf4120d8e60205",j="bf374508d6114a988e64aba4c6edfbf1",f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=document.createElement(t);return e.appendChild(c),c.className=null!=n&&"string"==typeof n?n:"",c.id=null!=s&&"string"==typeof s?s:"",c.innerHTML=r,c};function m(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({method:"get",url:"https://freegeoip.app/json/"});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){var n,s,r;for(s=document.getElementsByClassName("content-tab"),n=0;n<s.length;n++)s[n].style.display="none";for(r=document.getElementsByClassName("tab"),n=0;n<s.length;n++)r[n].className=r[n].className.replace(" is-active has-text-link","");document.getElementById(t).style.display="block",document.getElementById(t+"Tab").className+=" is-active has-text-link"}var y,x=n(16),O=n(24),v=(n(59),n(23));try{y=v.a.initializeApp({apiKey:"AIzaSyDVr8UakN2dxtyNFpXP1iKoCLQHrdtf5lI",authDomain:"final-309503.firebaseapp.com",databaseURL:"https://final-309503-default-rtdb.firebaseio.com",projectId:"final-309503",storageBucket:"final-309503.appspot.com",messagingSenderId:"15980661119",appId:"1:15980661119:web:8d1c06dcdf00b1bf8eb24a",measurementId:"G-ML5SGR56GV"})}catch(J){}var k=y.database(),T=v.a.auth();function L(){return Object(a.jsx)("div",{id:"game",children:Object(a.jsx)("p",{children:"No playlist selected!"})})}var M,S=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.hasGame=!1,window.clickTime="",window.numButtons=6,window.score=0,window.buttons=[],t=window.cp,n=P("game"),e.next=9,p()({method:"get",url:window.cp.tracks.href,headers:{authorization:"Bearer ".concat(window.sp_token)}});case 9:return s=e.sent,window.tracklist=s.data.items.sort((function(){return Math.random()-.5})),window.fullTracklist=Object(O.a)(window.tracklist),n.innerHTML="",r=f(n,"div","box","gamebox"),f(r,"h1","title is-3","gametitle",t.name),f(r,"h2","subtitle is-5","gametracknum","".concat(window.tracklist.length," tracks | by ").concat(t.owner.display_name)),f(r,"h2","subtitle is-6","gamesubtitle","".concat(t.description)),c=f(r,"button","startbutton","startbutton","Start!"),i=f(r,"button","hsbutton","hsbutton","View High Scores"),c.addEventListener("click",H.bind(this)),i.addEventListener("click",U.bind(this)),e.next=23,k.ref("playlists/".concat(window.cp.tracks.href.split("/")[window.cp.tracks.href.split("/").length-2],"/highscores/").concat(T.currentUser.uid)).get().then((function(e){return e.val()}));case 23:return M=e.sent,e.next=26,k.ref("users/".concat(T.currentUser.uid)).get().then((function(e){return e.val()}));case 26:e.sent;case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}();function U(){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(u.a.mark((function e(){var t,n,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P("gamebox"),n=-1,e.next=4,k.ref("playlists/".concat(window.cp.tracks.href.split("/")[window.cp.tracks.href.split("/").length-2],"/highscores/")).get().then((function(e){return e.val()}));case 4:return(s=e.sent)&&(s=(s=Object.entries(s)).sort((function(e,t){return t[1]-e[1]})),n=s.findIndex((function(e){return e[0]==T.currentUser.uid}))+1),e.next=8,k.ref("users/").get().then((function(e){return e.val()}));case 8:r=e.sent,t.removeChild(P("startbutton")),t.removeChild(P("hsbutton")),f(t,"p","hsp","hsp"),P("hsp").innerHTML=n>0?"<p>You rank #".concat(n," out of ").concat(s.length,".</p><br/>"):"",P("hsp").innerHTML+='<h1 class="title is-4">Current High Scores</h1>'+(s?s.slice(0,5).map((function(e){return"<p>".concat(T.currentUser.uid==e[0]?"YOU":"".concat(r[e[0]].username," #").concat(e[0].substring(e[0].length-4)),": ").concat(e[1],"</p>")})).join("")+"<br/><p>".concat(s.length," users have played this playlist.</p>"):"No high scores yet!"),f(t,"button","hsback","hsback","Back").addEventListener("click",E.bind(this));case 16:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function E(){var e=P("gamebox");e.removeChild(P("hsp")),e.removeChild(P("hsback"));var t=f(e,"button","startbutton","startbutton","Start!"),n=f(e,"button","hsbutton","hsbutton","View High Scores");t.addEventListener("click",H.bind(this)),n.addEventListener("click",U.bind(this))}function H(){window.hasGame=!0;var e=window.tracklist,t=(P("game"),P("gamebox"));t.removeChild(P("startbutton")),t.removeChild(P("hsbutton"));var n=f(t,"div",null,"timecontainer"),s=(f(n,"span",null,"score","Score: ".concat(window.score," | ").concat(e.length," tracks left")),f(n,"span","timearea","timearea","1000"),f(t,"p",null,"msg"),f(t,"div",null,"playerDiv"));f(s,"div",null,"gameplayer");s.addEventListener("click",R),f(t,"button",null,"notWorking","Not working or don't know? Skip the song.").addEventListener("click",A.bind(this));f(t,"div","choices columns is-multiline","gamechoices");t.removeChild(P("gamesubtitle")),C()}function C(){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(u.a.mark((function e(){var t,n,s,r,c,i,a,o,l,d,h,p,b=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.tracklist.length>0&&(P("timearea").innerHTML="1000"),window.roundScore=1e3,window.clickTime=0,window.buttons=[],P("gamechoices").innerHTML="",Array.from(Array(window.fullTracklist.length<window.numButtons?window.fullTracklist.length:window.numButtons).keys()).forEach((function(e){var t=f(P("gamechoices"),"div","choice column is-half","choice".concat(e)),n=f(t,"button","choicebutton","choicebutton".concat(e));window.buttons.push(n)})),t=window.fullTracklist,!(window.tracklist.length>0)){e.next=18;break}for(n=window.tracklist.shift(),P("gameplayer").innerHTML="<iframe id='currentplayer' src=\"https://open.spotify.com/embed/track/".concat(n.track.id,'" allowtransparency="true" allow="encrypted-media" onClick=\'').concat(R,"'></iframe>"),window.hasGame&&(s=setInterval((function(){var e=document.activeElement;e&&"currentplayer"==e.id&&(window.clickTimer=setTimeout(R,2e3),clearInterval(s))}),100)),r=(r=[n].concat(Object(O.a)(t.filter((function(e){return e!=n})).sort((function(){return Math.random()-.5})).slice(0,window.fullTracklist.length<window.numButtons?window.fullTracklist.length-1:window.numButtons-1)))).sort((function(){return Math.random()-.5})),c=r.findIndex((function(e){return e==n})),i=0;i<window.buttons.length;i++)a=window.buttons[i],o=r[i],a.innerHTML="".concat(o.track.name,"<br/>(").concat(o.track.artists.map((function(e){return e.name})).join(", "),")");window.buttons.forEach((function(e){e.id=="choicebutton".concat(c)?e.addEventListener("click",D.bind(b,n),{once:!0}):e.addEventListener("click",N.bind(b,n),{once:!0})})),e.next=34;break;case 18:return(!M||window.score>M)&&(k.ref("playlists/".concat(window.cp.tracks.href.split("/")[window.cp.tracks.href.split("/").length-2],"/highscores")).update(Object(x.a)({},"".concat(T.currentUser.uid),window.score)),k.ref("playlists/".concat(window.cp.tracks.href.split("/")[window.cp.tracks.href.split("/").length-2],"/timestamps")).update(Object(x.a)({},"".concat(T.currentUser.uid),new Date)),k.ref("users/".concat(T.currentUser.uid,"/scores")).update(Object(x.a)({},"".concat(window.cp.tracks.href.split("/")[window.cp.tracks.href.split("/").length-2]),window.score))),(l=P("gamebox")).innerHTML="<p>Finished with score of ".concat(window.score,"</p>\n        <p>Your previous high score: ").concat(M||"n/a",'</p><br/><h1 class = "title is-4">Current Highscores</h1>'),d=-1,e.next=24,k.ref("playlists/".concat(window.cp.tracks.href.split("/")[window.cp.tracks.href.split("/").length-2],"/highscores/")).get().then((function(e){return e.val()}));case 24:return(h=e.sent)&&(h=(h=Object.entries(h)).sort((function(e,t){return t[1]-e[1]})),d=h.findIndex((function(e){return e[0]==T.currentUser.uid}))+1),e.next=28,k.ref("users/").get().then((function(e){return e.val()}));case 28:p=e.sent,f(l,"p","hsp","hsp"),P("hsp").innerHTML=d>=0?"<p>You rank #".concat(d," out of ").concat(h.length,".</p><br/>"):"",P("hsp").innerHTML+=h?h.slice(0,5).map((function(e){return"<p>".concat(T.currentUser.uid==e[0]?"YOU":"".concat(p[e[0]].username," #").concat(e[0].substring(e[0].length-4)),": ").concat(e[1],"</p>")})).join("")+"<br/><p>".concat(h.length," users have played this playlist.</p>"):"No high scores yet!",f(l,"button","tryagain","tryagain","Try Again!").addEventListener("click",(function(){P("game").removeChild(l),S()}));case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){window.hasGame&&window.tracklist.length<=0&&(window.hasGame=!1),clearTimeout(window.clickTimer);var t=window.tracklist;window.score;window.score+=window.roundScore,P("score").innerHTML="Score: ".concat(window.score," | ").concat(t.length," tracks left"),P("msg").innerHTML="Nice work! It was ".concat(e.track.name," by ").concat(e.track.artists[0].name,"</br>+").concat(window.roundScore),P("msg").className="correct",C()}function N(e){window.hasGame&&window.tracklist.length<=0&&(window.hasGame=!1),clearTimeout(window.clickTimer);var t=window.tracklist;window.score;P("score").innerHTML="Score: ".concat(window.score," | ").concat(t.length," tracks left"),P("msg").innerHTML="Nope! It was ".concat(e.track.name," by ").concat(e.track.artists[0].name,"<br/>+0"),P("msg").className="incorrect",C()}function A(){window.hasGame&&window.tracklist.length<=0&&(window.hasGame=!1),clearTimeout(window.clickTimer),P("score").innerHTML="Score: ".concat(window.score," | ").concat(window.tracklist.length," tracks left"),C()}function R(){0==window.clickTime&&(window.clickTime=new Date);setInterval((function(){if(window.hasGame){var e=0==window.clickTime?0:new Date-window.clickTime;window.roundScore=Math.floor(1e3*Math.pow(.5,e/8e3)),P("timearea").innerHTML=window.roundScore,P("timearea").style.color=function(e){var t,n=255;e>500?(t=Math.floor(255-(e-500)/2),n=255):(n=Math.floor(255+(e-500)/2),t=255);return"#"+(t>16?t.toString(16):"0"+t.toString(16))+(n>16?n.toString(16):"0"+n.toString(16))+"00"}(window.roundScore)}}),100)}function P(e){return document.getElementById(e)}function G(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({method:"post",url:"https://accounts.spotify.com/api/token",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(b+":"+j)},data:"grant_type=client_credentials"});case 2:t=e.sent,window.sp_token=t.data.access_token;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(d.a)(u.a.mark((function e(){var t,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=P("playlistsearch").value)){e.next=9;break}return e.next=4,p()({method:"get",url:"https://api.spotify.com/v1/search",params:{q:t,type:"playlist",limit:24,offset:0},headers:{authorization:"Bearer ".concat(window.sp_token)}});case 4:n=e.sent,void 0==(s=n.data.playlists.items)[0]?P("displayResults").innerHTML="<p>Your query returned no playlist results. Try a different one!</p>":c(s),e.next=10;break;case 9:P("displayResults").innerHTML="<p>Your query returned no playlist results. Try a different one!</p>";case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=P("playlistsearch").value)){e.next=14;break}return e.prev=2,e.next=5,p()({method:"get",url:"https://api.spotify.com/v1/playlists/".concat(t.split("/").pop()),headers:{authorization:"Bearer ".concat(window.sp_token)}});case 5:i(e.sent.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),P("displayResults").innerHTML="<p>Not a valid playlist URL or ID! Make sure it's correct!</p>";case 12:e.next=15;break;case 14:P("displayResults").innerHTML="<p>No playlists found! Make sure your URL/ID is correct!</p>";case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function r(){return(r=Object(d.a)(u.a.mark((function e(){var t,n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=P("playlistsearch").value)){e.next=16;break}return e.prev=2,n=(n=t.split("/").pop()).includes("?")?n.split("?")[0]:n,e.next=7,p()({method:"get",url:"https://api.spotify.com/v1/users/".concat(n,"/playlists"),headers:{authorization:"Bearer ".concat(window.sp_token)},params:{limit:24}});case 7:(s=e.sent).data.items.length<=0?P("displayResults").innerHTML="<p>This user has no playlists.</p>":c(s.data.items),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),P("displayResults").innerHTML="<p>Not a valid user URL or ID! Make sure your URL/ID is correct!</p>";case 14:e.next=17;break;case 16:P("displayResults").innerHTML="<p>No users found! Make sure your URL is correct!</p>";case 17:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function c(e){var t=this,n=P("displayResults");n.innerHTML="",e.forEach((function(e){var s=document.createElement("div");s.className="spotifyresultdiv column is-one-third content",n.appendChild(s);var r=document.createElement("iframe");r.className="spotifyresult",r.src="https://open.spotify.com/embed/playlist/".concat(e.id),r.frameborder=0,s.appendChild(r);var c=document.createElement("button");c.innerHTML="Choose",c.className="playlistbutton",c.addEventListener("click",i.bind(t,e),!0),s.appendChild(c)}))}function i(e,t){return o.apply(this,arguments)}function o(){return(o=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(0,"play"),window.cp=t,S();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return window.sp_token||e(),setTimeout(e,357e4),Object(a.jsxs)("div",{id:"searchAPIs",children:[Object(a.jsxs)("div",{id:"searchbars",children:[Object(a.jsx)("input",{id:"playlistsearch",placeholder:"Search Query, Playlist URL/ID, or User URL/ID"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{id:"getplaylist",onClick:function(){return n.apply(this,arguments)},children:"Get Playlists with Query"}),Object(a.jsx)("button",{id:"getplaylistid",onClick:function(){return s.apply(this,arguments)},children:"Get Playlist by URL/ID"}),Object(a.jsx)("button",{id:"getplaylistuser",onClick:function(){return r.apply(this,arguments)},children:"Get User Playlists by URL/ID"})]}),Object(a.jsx)("div",{id:"displayResults",class:"columns is-multiline"})]})}var _=n(13);function Y(){var e=Object(s.useState)(""),t=Object(_.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.ref("version").get().then((function(e){return e.val()}));case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsx)("div",{id:"footerdiv",class:"content has-text-centered",children:Object(a.jsxs)("span",{id:"footerpara",children:["version ",n]})})}var V=function(){window.hasGame=!1;var e=Object(s.useState)({}),t=Object(_.a)(e,2),n=t[0],c=t[1],l=Object(s.useState)(""),h=Object(_.a)(l,2),b=h[0],j=h[1];return Object(s.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({method:"get",url:"https://flagcdn.com/en/codes.json"});case 2:return t=e.sent,c(t.data),e.next=6,m();case 6:n=e.sent,window.codes=t.data,j(n.country_code.toLowerCase());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)("section",{id:"top",class:"hero is-small is-success",children:Object(a.jsx)("div",{class:"hero-body",children:Object(a.jsx)(o,{})})}),Object(a.jsx)("section",{id:"app-body",class:"section",children:Object(a.jsxs)("div",{id:"loginbox",class:"columns is-multiline",children:[Object(a.jsxs)("div",{id:"logincol",class:"column is-6",children:[Object(a.jsx)("h1",{class:"title is-2",children:"Login"}),Object(a.jsx)("h1",{class:"subtitle is-5 is-italic",children:"for returning users"}),Object(a.jsx)("input",{id:"loginemail",type:"email",placeholder:"Email"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{id:"loginpassword",type:"password",placeholder:"Password"}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{id:"loginmsg"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{id:"loginbutton",class:"loginbuttons",onClick:function(){return f.apply(this,arguments)},children:"Log In"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{class:"notWorking",onClick:function(){T.sendPasswordResetEmail(T.currentUser.email).then((function(){P("loginmsg").innerHTML="Password reset email sent."})).catch((function(e){return console.log(e)}))},children:"Forgot password?"})]}),Object(a.jsxs)("div",{id:"signupcol",class:"column is-half",children:[Object(a.jsx)("h1",{class:"title is-2",children:"Signup"}),Object(a.jsx)("h1",{class:"subtitle is-5 is-italic",children:"for new users"}),Object(a.jsx)("input",{id:"signupemail",type:"email",placeholder:"Email"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{id:"signuppassword",type:"password",placeholder:"Password"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{id:"signupusername",type:"text",placeholder:"Username"}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{id:"signupmsg"}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:"Where are you from? (Be honest!)"}),Object(a.jsxs)("span",{id:"countryspan",children:[Object(a.jsx)("img",{id:"flagimg",alt:"flag-".concat(b),src:"https://flagcdn.com/h24/".concat(b,".png")}),Object(a.jsxs)("select",{id:"countryselect",onChange:function(){var e=document.getElementById("countryselect"),t=Object.keys(n).find((function(t){return n[t]===e.options[e.selectedIndex].text}));document.getElementById("flagimg")&&document.getElementById("countryspan").removeChild(document.getElementById("flagimg"));(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=document.createElement(n);return e.insertBefore(i,t),i.className=null!=s&&"string"==typeof s?s:"",i.id=null!=r&&"string"==typeof r?r:"",i.innerHTML=c,i}(document.getElementById("countryspan"),document.getElementById("countryselect"),"img",null,"flagimg")).src="https://flagcdn.com/h24/".concat(t,".png")},children:[Object.keys(n).filter((function(e){return 2==e.length&&!["un","eu","aq"].includes(e)})).map((function(e){return n[e]})).sort().map((function(e){return Object(a.jsx)("option",{selected:n[b]==e,children:e})})),null!=P("countryselect")?P("countryselect").click():""]}),Object(a.jsx)("br",{})]}),Object(a.jsx)("button",{id:"signupbutton",class:"loginbuttons",onClick:function(){return w.apply(this,arguments)},children:"Sign Up"})]})]})}),Object(a.jsx)("section",{children:Object(a.jsx)(Y,{})})]});function f(){return(f=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P("loginemail").value&&P("loginpassword").value?T.signInWithEmailAndPassword(P("loginemail").value,P("loginpassword").value).then((function(e){e&&T.currentUser.emailVerified?(P("loginmsg").innerHTML="Success!",i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Q,{})}),P("root")),document.getElementById("searchTab").click()):P("loginmsg").innerHTML="Your email isn't verified! Verify it and try again."})).catch((function(e){return null!=P("loginmsg")?P("loginmsg").innerHTML=e.message:""})):P("loginmsg").innerHTML="All fields must not be empty!";case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function e(){var t,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={username:P("signupusername").value,password:P("signuppassword").value,email:P("signupemail").value},s=P("countryselect"),t.username&&t.password&&t.email?t.username.length<=15&&t.username.length>=5?(P("signupmsg").innerHTML="Account successfully created! Now verify your email, then login with your email/password.",T.createUserWithEmailAndPassword(t.email,t.password).then((function(e){e&&(e.user.updateProfile({displayName:t.username}),k.ref("users/"+e.user.uid).set({username:t.username,email:t.email,country:Object.keys(n).find((function(e){return n[e]===s.options[s.selectedIndex].text}))}),T.useDeviceLanguage(),T.currentUser.sendEmailVerification().catch((function(e){return console.log(e)})))})).catch((function(e){return P("signupmsg").innerHTML=e.message})),console.log(T.currentUser)):t.username.length<5?P("signupmsg").innerHTML="Username can't be shorter than 5 characters.":P("signupmsg").innerHTML="Username can't be longer than 15 characters.":P("signupmsg").innerHTML="All fields must not be empty!";case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}};function z(){i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(V,{})}),document.getElementById("root"))}var W=function(){return Object(a.jsxs)("div",{id:"signoutdiv",children:[Object(a.jsx)("p",{class:"title is-2",children:"Are you sure?"}),Object(a.jsx)("button",{onClick:z,children:"Return to Login"})]})};var q=function(){var e=!1,t=Object(s.useState)(new Date),n=Object(_.a)(t,2),r=n[0],c=n[1],o=Object(s.useState)({}),l=Object(_.a)(o,2),h=l[0],p=l[1];function b(){return Object(a.jsxs)("div",{id:"userstats",children:[Object(a.jsxs)("h1",{class:"title is-5",children:["About ",T.currentUser.displayName]}),Object(a.jsxs)("p",{children:["Email: ",T.currentUser.email]}),Object(a.jsxs)("p",{children:["User ID: ",T.currentUser.uid]}),Object(a.jsxs)("p",{children:["Date joined: ",new Date(T.currentUser.metadata.creationTime).toLocaleString(window.lang,{month:"short",day:"numeric",year:"numeric"})]}),Object(a.jsxs)("p",{children:["Country: ",Object(a.jsx)("img",{alt:"flag-"+h.country,src:"https://flagcdn.com/h24/".concat(h.country,".png")})]}),Object(a.jsxs)("p",{children:["Playlists played: ",h.scores?Object.keys(h.scores).length:0]}),Object(a.jsxs)("p",{children:["Total Score: ",h.scores?Object.values(h.scores).reduce((function(e,t){return e+t}),0):0]}),Object(a.jsxs)("p",{children:["Last Updated: ",new Date(r).toLocaleString(window.lang,{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})]}),Object(a.jsx)("button",{id:"deleteaccount",onClick:j,children:"Delete Account"})]})}function j(){window.timeout="","Are you sure?"==P("deleteaccount").innerHTML?(e=!0,clearTimeout(window.timeout),clearTimeout(w),h.scores&&Object.keys(h.scores).forEach((function(e){k.ref("playlists/".concat(e,"/highscores")).update(Object(x.a)({},"".concat(T.currentUser.uid),null)),k.ref("playlists/".concat(e,"/timestamps")).update(Object(x.a)({},"".concat(T.currentUser.uid),null))})),k.ref("users/").update(Object(x.a)({},"".concat(T.currentUser.uid),null)),T.currentUser.delete().catch((function(e){console.log(e)})),i.a.render(Object(a.jsxs)("div",{id:"deletemsg",children:[Object(a.jsx)("h1",{class:"title is-2",children:"We're sorry to see you go."}),Object(a.jsx)("p",{children:"Please join the Tunespot community again soon!"}),Object(a.jsx)("button",{class:"loginbuttons",style:{width:"200px"},onClick:z,children:"Return to Signup Screen"})]}),P("root"))):(P("deleteaccount").innerHTML="Are you sure?",e||(window.timeout=setTimeout(f,5e3)))}function f(){e||null==T.currentUser||(P("deleteaccount").innerHTML="Delete Account",clearTimeout(window.timeout),window.timeout="")}function m(){return(m=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e||null==T.currentUser){t.next=6;break}return t.next=3,k.ref("users/".concat(T.currentUser.uid)).get().then((function(e){return e.val()}));case 3:n=t.sent,p(n),c(new Date);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(s.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.ref("users/".concat(T.currentUser.uid)).get().then((function(e){return e.val()}));case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var w=setTimeout((function(){return m.apply(this,arguments)}),6e4);return Object(a.jsx)("div",{id:"usercontainer",children:Object(a.jsx)(b,{})})};var F=function(){return Object(a.jsxs)("div",{id:"aboutdiv",children:[Object(a.jsx)("h1",{class:"title is-4",children:"Hey there! My name's Brandon, and thanks for playing my game!"}),Object(a.jsx)("h1",{class:"title is-5",children:"How To Play"}),Object(a.jsx)("p",{children:"Search for a playlist with a query, the playlist URL/ID or find a user's playlists by user URL/ID."}),Object(a.jsx)("p",{children:"Once selected, you can begin playing by pressing the start button."}),Object(a.jsxs)("p",{children:["You can get a maximum of 1000 points per song. The points start dropping down two seconds after you ",Object(a.jsx)("b",{children:"first press play"}),", leaving you two seconds to get a perfect score on each song."]}),Object(a.jsx)("p",{children:"After that, the points drop exponentially, at a rate of half every 8 seconds. (So, 500 will be left after 10 seconds, 250 after 18, 125 after 26, etc.)"}),Object(a.jsx)("p",{children:"Once you've played through all of the songs, you can see your rank against other users!"}),Object(a.jsx)("br",{}),Object(a.jsx)("h1",{class:"title is-5",children:"Coming Soon in Version 1.1"}),Object(a.jsx)("p",{children:"Your most recently played playlists will be visible in a separate tab. Right now, the only way to access a playlist is to search or use its ID/URL."}),Object(a.jsx)("p",{children:"Potential bug fixes when pressing the play button due to large amount of requests."}),Object(a.jsx)("p",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h1",{class:"title is-5",children:"About the Dev and Game"}),Object(a.jsxs)("p",{children:["I'm currently a sophomore at UNC-Chapel Hill studying CS and Linguistics. Check out my website ",Object(a.jsx)("a",{href:"https://brandon-kaminski.tech",target:"_blank",children:"here"}),"!"]}),Object(a.jsx)("p",{children:"I created TuneSpot in April-May 2021 for my web development course's final project, but I thought everyone around the world could enjoy it. Feel free to use it to challenge your friends, jog your memory, discover Spotify-curated playlists, or even study for music classes! Crossing backseat name-that-tune with one of the most popular streaming platforms presents endless opportunities to find new music. You don't even need a Spotify account to play TuneSpot!"}),Object(a.jsx)("p",{children:"This site is built in react.js, and makes heavy use of the Spotify API. Authentication/data storage is handled through Firebase. I also used a country code API for the flag images, and a geolocation API to make a best guess of where you're from when you sign up."}),Object(a.jsx)("p",{children:"Go set some high scores!"}),Object(a.jsx)("p",{class:"is-italic has-text-link",children:"-Brandon Kaminski"})]})};var K=function(){var e=Object(s.useState)(""),t=Object(_.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(new Date),i=Object(_.a)(c,2),o=i[0],l=i[1];Object(s.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.ref("users").get().then((function(e){return e.val()}));case 2:t=e.sent,r(t),l(new Date);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var h=Object.entries(n).map((function(e){return e[1].country})),p={};h.forEach((function(e){e in p?p[e]+=1:p[e]=1}));var b=Object.entries(p).sort((function(e,t){return t[1]-e[1]})),j=Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:b.map((function(e){return Object(a.jsxs)("tr",{class:e[0]==n[T.currentUser.uid].country?"mine":"",children:[Object(a.jsx)("td",{children:Object(a.jsx)("img",{src:"https://flagcdn.com/h120/".concat(e[0],".png")})}),Object(a.jsx)("td",{children:window.codes[Object.keys(window.codes).find((function(t){return t==e[0]}))]}),Object(a.jsx)("td",{children:e[1]})]})}))})});function f(){return(f=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.ref("users").get().then((function(e){return e.val()}));case 2:t=e.sent,r(t),l(new Date);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return setTimeout((function(){return f.apply(this,arguments)}),6e4),Object(a.jsxs)("div",{id:"worldstats",class:"has-text-centered",children:[Object(a.jsxs)("h1",{class:"title is-4",children:["TuneSpot has ",h.length," user",1==h.length?"":"s"," from ",b.length," countr",1==b.length?"y":"ies","!"]}),j,Object(a.jsxs)("p",{children:["Last Updated: ",new Date(o).toLocaleString(window.lang,{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})]})]})};var Q=function(){return window.cp={},window.lang="en",window.signOut=!1,Object(a.jsxs)("div",{children:[Object(a.jsxs)("section",{id:"top",class:"hero is-small is-success",children:[Object(a.jsx)("div",{class:"hero-body",children:Object(a.jsx)(o,{})}),Object(a.jsx)("div",{class:"hero-foot",children:Object(a.jsx)("nav",{class:"tabs is-centered",children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{id:"searchTab",class:"tab is-active has-text-link",onClick:function(e){return g(0,"search")},children:Object(a.jsx)("a",{children:"Playlist Search"})}),Object(a.jsx)("li",{id:"playTab",class:"tab",onClick:function(e){return g(0,"play")},children:Object(a.jsx)("a",{children:"Play Game"})}),Object(a.jsx)("li",{id:"userTab",class:"tab",onClick:function(e){return g(0,"user")},children:Object(a.jsxs)("a",{children:["About ",T.currentUser.displayName]})}),Object(a.jsx)("li",{id:"aboutTab",class:"tab",onClick:function(e){return g(0,"about")},children:Object(a.jsx)("a",{children:"About TuneSpot"})}),Object(a.jsx)("li",{id:"worldTab",class:"tab",onClick:function(e){return g(0,"world")},children:Object(a.jsx)("a",{children:"Where in the world?"})}),Object(a.jsx)("li",{id:"signOutTab",class:"tab",onClick:function(e){g(0,"signOut"),window.signOut=!0},children:Object(a.jsx)("a",{children:"Sign Out"})})]})})})]}),Object(a.jsx)("section",{children:Object(a.jsx)(Y,{})}),Object(a.jsxs)("section",{id:"app-body",class:"section",children:[Object(a.jsx)("div",{id:"search",class:"content-tab",children:Object(a.jsx)(G,{})}),Object(a.jsx)("div",{id:"play",class:"content-tab",children:Object(a.jsx)(L,{})}),Object(a.jsx)("div",{id:"user",class:"content-tab",children:Object(a.jsx)(q,{})}),Object(a.jsx)("div",{id:"signOut",class:"content-tab",children:Object(a.jsx)(W,{})}),Object(a.jsx)("div",{id:"about",class:"content-tab",children:Object(a.jsx)(F,{})}),Object(a.jsx)("div",{id:"world",class:"content-tab",children:Object(a.jsx)(K,{})})]})]})};null!=T.currentUser?(i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Q,{})}),document.getElementById("root")),document.getElementById("searchTab").click()):i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(V,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.8d53d6c2.chunk.js.map